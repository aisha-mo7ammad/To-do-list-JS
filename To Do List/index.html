<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To do list..</title>
    <link rel="stylesheet" href="style.css">
<!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø®Ø·ÙˆØ·  -->
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300&display=swap" rel="stylesheet">

<!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø§ÙŠÙ‚ÙˆÙ†Ø§Øª  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

</head>

<body>
    <!-- Ø§Ù„Ø®Ù„ÙÙŠØ© -->
        <div id="all_site">

            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… -->
            <div id="box_toDo">

                <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
                <div id="header_box">
                    <button class="crud_btn"  id="add+btn" onclick="addTask()" style="font-size: 20px;float:right; margin:10px ">+</button>
                    <h2 >Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
                </div>
                <!-- // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ // -->

                <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… -->
                <div id="list_box">

                    <!-- Ø§Ù„Ù…Ù‡Ù…Ø© -->
                    <div class="task">

                        <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø© -->
                        <div class="name_task">
                            <h4>Ø±Ø­Ù„Ø© Ø¹Ù…Ù„</h4> 
                            <div style=" display:inline-flex; margin-right: 5px; ">
                                <span class="material-symbols-outlined" style="font-size: 15px;margin: -2px;  ">
                                    calendar_month
                                </span>
                                <p>2021-10-10</p>
                            </div>   
                        </div>

                        <!-- Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø©  -->
                        <div class="crud">
                            <button class="crud_btn" id="edit+btn">ğŸ“</button>
                            <button class="crud_btn" id="status+btn" style="font-size: 25px;">âœ˜</button> 
                            <!-- âœ˜ âœ”ï¸ -->
                            <button class="crud_btn" id="delete+btn" style="font-size: 15px;">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <!-- // Ø§Ù„Ù…Ù‡Ù…Ø© // -->

                    <!-- Ø§Ù„Ù…Ù‡Ù…Ø© -->
                    <!-- <div id="task">

                        <div class="name_task">
                            <h4>Ø±Ø­Ù„Ø© Ø¹Ù…Ù„</h4> 
                            <div style=" display:inline-flex; margin-right: 5px; ">
                                <span class="material-symbols-outlined" style="font-size: 15px;margin: -2px;  ">
                                    calendar_month
                                </span>
                                <p>2021-10-10</p>
                            </div>   
                        </div>

                        <div class="crud">
                            <button class="crud_btn" id="edit+btn">ğŸ“</button>
                            <button class="crud_btn" id="status+btn" style="font-size: 25px;">âœ”ï¸</button> 
                            <button class="crud_btn" id="delete+btn" style="font-size: 15px;">ğŸ—‘ï¸</button>
                        </div>
                    </div> -->
                    <!-- // Ø§Ù„Ù…Ù‡Ù…Ø© // -->

                    <!-- Ø§Ù„Ù…Ù‡Ù…Ø© -->
                    <!-- <div id="task">

                        <div class="name_task">
                            <h4>Ø±Ø­Ù„Ø© Ø¹Ù…Ù„</h4> 
                            <div style=" display:inline-flex; margin-right: 5px; ">
                                <span class="material-symbols-outlined" style="font-size: 15px;margin: -2px;  ">
                                    calendar_month
                                </span>
                                <p>2021-10-10</p>
                            </div>   
                        </div>

                        <div class="crud">
                            <button class="crud_btn" id="edit+btn">ğŸ“</button>
                            <button class="crud_btn" id="status+btn" style="font-size: 25px;">âœ”ï¸</button> 
                            <button class="crud_btn" id="delete+btn" style="font-size: 15px;">ğŸ—‘ï¸</button>
                        </div>
                    </div> -->
                    <!-- // Ø§Ù„Ù…Ù‡Ù…Ø© // -->

                </div>
                <!-- // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… // -->

            </div>
            <!-- // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… // -->

        </div>
    <!-- // Ø§Ù„Ø®Ù„ÙÙŠØ© //-->
</body>


<script>  


    let tasks = [
      
       
    ]

    // Ø§Ø³ØªØ¯Ø¹ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù„ÙŠ Ø­ÙØ¸ØªÙ‡Ù… ÙÙŠÙ‡ ÙˆØ§Ø±Ø¬Ø¹Ù‡ Ù„Ù‚ÙŠÙ…ØªÙ‡Ù… Ø¨Ø¯Ù„ Ø§Ù„Ù†Øµ
    function getFromStorage(){
        // Ø§Ø¹Ø·ÙŠÙ‡ Ù†ÙØ³ Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ§Ø­ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ®Ø²ÙŠÙ†
        let retrievedTasks = JSON.parse(localStorage.getItem("tasks"))

        // if(retrievedTasks == null){
        //     tasks = []
        // }else{
        //     tasks = retrievedTasks
        // }
        // Ù…Ù…ÙƒÙ† Ø§Ø®ØªØµØ± Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ù† Ø§Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ…Ø©null  Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ø¹Ø¯ ØŸ
        tasks = retrievedTasks ?? []
    }
    getFromStorage()

    // Ø§Ø¸Ù‡Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…
    function appearAllTasks() {
        document.getElementById("list_box").innerHTML = ""
        index = 0
        for( task of tasks)
            {  
                contentTask = 
                    `
                        <!-- Ø§Ù„Ù…Ù‡Ù…Ø© -->
                        <div class="task ${task.isDone ? 'done' : ''}">

                            <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø© -->
                            <div class="name_task">
                                <h4>${task.tittle}</h4> 
                                <div style=" display:inline-flex; margin-right: 5px; ">
                                    <span class="material-symbols-outlined" style="font-size: 15px;margin: -2px;  ">
                                        calendar_month
                                    </span>
                                    <p>${task.date}</p>
                                </div>   
                            </div>

                            <!-- Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø©  -->
                            <div class="crud">
                                <button class="crud_btn" id="edit+btn" onclick="editTask(${index}) " >ğŸ“</button>
                                ${task.isDone ? `
                                         <button class="crud_btn" id="status+btn" onclick="statusTask(${index})" style="font-size: 25px;">âœ”ï¸</button> 
                                        ` : `
                                        <button class="crud_btn" id="status+btn" onclick="statusTask(${index})" style="font-size: 25px;">âœ˜</button> 
                                        `}
                                <button class="crud_btn" id="delete+btn" onclick="deleteTask(${index})" style="font-size: 15px;">ğŸ—‘ï¸</button>
                            </div>
                        </div>
                        <!-- // Ø§Ù„Ù…Ù‡Ù…Ø© // -->
                    `
                document.getElementById("list_box").innerHTML += contentTask
                index++
            }
    }
    appearAllTasks()


    // Ø§Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
    function addTask(){
        let newTaskName =  prompt("Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©")
        // Ø§Ø¬ÙŠØ¨ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ø­ÙˆÙ„Ù‡ Ø¨Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù„ÙŠ Ø§Ø¨ÙŠ ÙˆØ¨Ø¹Ø¯Ù‡ Ø§Ù‚Øµ Ø§Ù„ÙˆÙ‚Øª Ø¹Ø´Ø§Ù† Ù…Ø§ ÙŠØ¸Ù‡Ø±
        // let date = new Date().toISOString().substring(0,10)
        let today = new Date()
        // Ø§Ù‚Ø¯Ø± Ø§ÙƒØªØ¨Ù‡ Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„ÙŠ Ø§ÙØ¶Ù„Ù‡Ø§
        let date = today.getFullYear() + "-" + (today.getMonth()+1) + "-" + today.getDay()
        // Ù…Ù…ÙƒÙ† Ø§Ø¶ÙŠÙ Ø§Ù„ÙˆÙ‚Øª
        // let date = today.getFullYear() + "-" + (today.getMonth()+1) + "-" + today.getDay() + " | " + today.getHours() + ":" + today.getMinutes()
        if (newTaskName != null) 
            {
                let newTask = {"tittle":newTaskName,
                                "date":date,
                                "isDone": false}
                tasks.push(newTask)
                
                storageTasks()
                appearAllTasks()
            }
    }


    // ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©
    function editTask(index){
        let editTaskName =  prompt("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯" , tasks[index].tittle)
        if (editTaskName === null) {
            return
        }
        tasks[index].tittle = editTaskName
        storageTasks()
        appearAllTasks()
    }


    // ØªØºÙŠÙŠØ± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ùˆ Ù„Ø§
    function statusTask(index){

        // if(tasks[index].isDone)
        //     {
        //         tasks[index].isDone = false                
        //     }
        // else{
        //     tasks[index].isDone = true
        // }

        // Ø§Ø®ØªØµØ± Ø§Ù„Ø§ÙƒÙˆØ§Ø¯ ÙÙŠ Ø³Ø·Ø± Ø¹Ø´Ø§Ù† ÙŠØ®Ø²Ù† ÙÙŠÙ‡Ø§ Ø¹ÙƒØ³ Ø§Ù„Ù‚ÙŠÙ…Ø©
        tasks[index].isDone = !tasks[index].isDone
        storageTasks()
        appearAllTasks()
        
    }


    // Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©
    function deleteTask(index){
        let deleteTask = tasks[index].tittle
        let isSure = confirm( ` Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù…Ù‡Ù…Ø© ${deleteTask} ØŸ`)
        if(isSure){
            tasks.splice(index,1)
            storageTasks()
            appearAllTasks()
        }
        
    }

    // Ø§Ø®Ø²Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
    function storageTasks(){
        // Ø§Ø­ÙˆÙ„ Ø§Ù„Ù…ØµÙÙˆÙØ© Ù„Ù†Øµ Ù„Ù„ØªØ®Ø²ÙŠÙ†
        let taskString = JSON.stringify(tasks)
        // Ø§Ø®Ø²Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ø§ÙƒØªØ¨ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù† Ø¹Ù†Ø¯ÙŠ ÙˆØ§Ø¹Ø·ÙŠÙ‡ Ù…ØªØºÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        localStorage.setItem("tasks" , taskString)
    }
</script>

</html>